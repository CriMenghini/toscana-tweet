<!DOCTYPE html>
<html lang = "en">
   <head>
      <title>My Document</title>


      <script type = "text/javascript" src = "https://d3js.org/d3.v4.min.js"></script>

   </head>

   <body>

    <div class = "myclass"> <!-- Con l'id <div id = "hello"> la select è con il #hello-->
         Hello World!
      </div>
	<div id="svgcontainer" style="text-align:right;">
	</div>



	<script language="javascript">

			var w=700;
			var h=1000;

			var dataset = [{'tweet':'RT @GianniCuperIoPD: Dopo il discorso di #Renzi abbiamo perso un altro 5%.\n#elezioni2018', 'info':{'num_RT': 701,
  'user': 'Gianni Kuperlo',
  'user_followers': 36159,
  'user_friends': 1695,
  'user_id': 1566553698}},
 {'tweet':'RT @GiorgiaMeloni: A #Livorno i centri sociali ci impediscono persino di passeggiare nella piazza. \nEcco la DEMOCRAZIA di cui parlano tanto…', 'info' : {'num_RT': 915,
  'user': 'Giorgia Meloni ن',
  'user_followers': 646804,
  'user_friends': 689,
  'user_id': 130537001}},
 ];


function wrap(text, width) {
  text.each(function() {
    var text = d3.select(this),
        words = text.text().split(/\s+/).reverse(),
        word,
        line = [],
        lineNumber = 0,
        lineHeight = 1.1, // ems
        y = text.attr("y"),
        dy = parseFloat(text.attr("dy")),
        tspan = text.text(null).append("tspan").attr("x", 0).attr("y", y).attr("dy", dy + "em")
    while (word = words.pop()) {
      line.push(word)
      tspan.text(line.join(" "))
      if (tspan.node().getComputedTextLength() > width) {
        line.pop()
        tspan.text(line.join(" "))
        line = [word]
        tspan = text.append("tspan").attr("x", 0).attr("y", y).attr("dy", `${++lineNumber * lineHeight + dy}em`).text(word)
      }
    }
  })
}

			var svg = d3.select('#svgcontainer')
						.append("svg")
						.attr("width", w)
						.attr("height", h);

			var tweet = svg.selectAll("text")
						   .data(dataset)
						   .enter()
						   .append("text");

			var ranking = tweet.attr("x", function (d, i) {return i+70;} )
						   .attr("y", function (d, i) {return 100+30*i;})

						   .attr('x', 0)
  						   //.attr('y', 100)
  						   .text(function (d) {return (d.tweet);})
  						   .style('width', '20px')
						   .attr("font-family", "sans-serif")
						   .attr("fill", "blue");


			//var squares = svg.selectAll('rect')
			//				 .data(dataset)
			//				 .enter()
			//				 .append('rect');


			var ArrayProva = [10,8];

			for (var j = 0; j < ArrayProva.length; j++){

				for (var i = 0; i < ArrayProva[j]; i++){
				svg.append("rect")
								 .attr('x', 10 + 20*i)
								 .attr('y', 20 + 30*j)
								 .attr("width", 15)
								 .attr("height", 15)
								 .attr("fill", "blue")
								 .on("mouseover", function(d) {d3.select(this)
								 								 .attr("r", 10)
								 								 .style("fill", "red")})
								 .on("mouseout", function(d) {d3.select(this)
								 								 .attr("r", 5.5)
								 								 .style("fill", "green")
								 .on("mouseover", function(d) {d3.select(this)
								 								 .attr("r", 10)
								 								 .style("fill", "red")})
								 ;
});
								}
			};

			var prova = svg.selectAll('text')
			   .data(dataset)
			   .enter()
			   .append('text');

			 var provaAttr =  prova.attr('x', 10 + 20*20)
  			   .attr('y', 65)
  			   .text('hallo');




	</script>

</body>
</html>